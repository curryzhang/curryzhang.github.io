<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>C#重温—泛型 | 张小东的博客</title>
    <meta name="description" content="你有没有想过，为这世界带来哪怕一点点改变">
    
    
    <link rel="preload" href="/assets/css/0.styles.8fe22975.css" as="style"><link rel="preload" href="/assets/js/app.e7516a85.js" as="script"><link rel="preload" href="/assets/js/10.ec966a39.js" as="script"><link rel="prefetch" href="/assets/js/13.2d17f852.js"><link rel="prefetch" href="/assets/js/2.cda51ec0.js"><link rel="prefetch" href="/assets/js/3.fc777f15.js"><link rel="prefetch" href="/assets/js/4.94c44e35.js"><link rel="prefetch" href="/assets/js/5.c56035e9.js"><link rel="prefetch" href="/assets/js/6.f2f40b07.js"><link rel="prefetch" href="/assets/js/7.2ebccaed.js"><link rel="prefetch" href="/assets/js/8.27d77717.js"><link rel="prefetch" href="/assets/js/9.04d29e7f.js"><link rel="prefetch" href="/assets/js/11.b719c488.js"><link rel="prefetch" href="/assets/js/12.8a90bd1d.js"><link rel="prefetch" href="/assets/js/14.322c033c.js"><link rel="prefetch" href="/assets/js/15.163d14c7.js"><link rel="prefetch" href="/assets/js/16.1b07c094.js"><link rel="prefetch" href="/assets/js/17.c7309bef.js"><link rel="prefetch" href="/assets/js/18.6d00425f.js"><link rel="prefetch" href="/assets/js/19.88b26957.js"><link rel="prefetch" href="/assets/js/20.c19a5c32.js"><link rel="prefetch" href="/assets/js/21.e691da67.js"><link rel="prefetch" href="/assets/js/22.87086fea.js"><link rel="prefetch" href="/assets/js/23.9f4d3ab4.js"><link rel="prefetch" href="/assets/js/24.cbf75ee0.js"><link rel="prefetch" href="/assets/js/25.47e62b1a.js"><link rel="prefetch" href="/assets/js/26.138c7a43.js"><link rel="prefetch" href="/assets/js/27.18a72c52.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8fe22975.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">张小东的博客</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">个人文章</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/C.html#重温/" class="nav-link">C#重温</a></li><li class="dropdown-item"><!----> <a href="/blog/Net/" class="nav-link">Net</a></li><li class="dropdown-item"><!----> <a href="/blog/JavaScript入门系列/" class="nav-link">JavaScript入门系列</a></li><li class="dropdown-item"><!----> <a href="/blog/DDD/" class="nav-link">DDD</a></li><li class="dropdown-item"><!----> <a href="/blog/MQ/" class="nav-link">MQ</a></li></ul></div></div><div class="nav-item"><a href="https://www.jianshu.com/u/0469adf1cb7b" target="_blank" rel="noopener noreferrer" class="nav-link external">
  简书
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">个人文章</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/C.html#重温/" class="nav-link">C#重温</a></li><li class="dropdown-item"><!----> <a href="/blog/Net/" class="nav-link">Net</a></li><li class="dropdown-item"><!----> <a href="/blog/JavaScript入门系列/" class="nav-link">JavaScript入门系列</a></li><li class="dropdown-item"><!----> <a href="/blog/DDD/" class="nav-link">DDD</a></li><li class="dropdown-item"><!----> <a href="/blog/MQ/" class="nav-link">MQ</a></li></ul></div></div><div class="nav-item"><a href="https://www.jianshu.com/u/0469adf1cb7b" target="_blank" rel="noopener noreferrer" class="nav-link external">
  简书
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <!----> </div> <div class="page"> <div class="content"><h1 id="c-重温—泛型"><a href="#c-重温—泛型" aria-hidden="true" class="header-anchor">#</a> C#重温—泛型</h1> <h2 id="泛型定义"><a href="#泛型定义" aria-hidden="true" class="header-anchor">#</a> 泛型定义</h2> <p>泛型就是泛指的类型。这是在.NET Framework 2.0出现的语法。</p> <p><strong>泛型的好处：</strong></p> <ul><li>类型的安全性</li> <li>代码的可重用性</li> <li>提升效率（避免了不必要的装箱拆箱）。</li></ul> <p>下面我分别来说明这三点。</p> <ol><li>泛型会约束变量的类型。比如ArryList可以添加任意类型的值，而List<int>只能添加int类型的值</int></li></ol> <div class="language- extra-class"><pre class="language-text"><code>ArrayList list = new ArrayList();
list.Add(&quot;hello&quot;);
list.Add(1111);

 List&lt;int&gt; list = new List&lt;int&gt;();
list.Add(11);
</code></pre></div><ol start="2"><li>定义了一个泛型类Generic来提高代码可重用性，在指定的时候是泛指类型，在使用的时候就需要特定类型。</li></ol> <div class="language- extra-class"><pre class="language-text"><code>static void Main(string[] args)
{
  Generic&lt;string&gt; gs1 = new Generic&lt;string&gt;();
  gs1.Name = &quot;hello world&quot;;
  Console.WriteLine(gs1.Name);

  Generic&lt;int&gt; gs2 = new Generic&lt;int&gt;();
  gs2.Name = 111;
  Console.WriteLine(gs2.Name);

  Generic&lt;Task&gt; gsTask = new Generic&lt;Task&gt;();
  gsTask.Name = Task.Run(() =&gt; {
    Console.WriteLine(&quot;这是一个Task&quot;);
  });
}

public class Generic&lt;T&gt;
{
  public T Name=default(T);
}
</code></pre></div><ol start="3"><li>泛型会固定类型，在使用的时候就知道是什么类型了，避免了不必要的类型转换。</li></ol> <div class="language- extra-class"><pre class="language-text"><code>object a = 18;
int b = (int)a;
//泛型
int c = GetValue&lt;int&gt;(19);
string b = GetValue&lt;string&gt;(&quot;hello&quot;);
 public static T GetValue&lt;T&gt;(T a)
{
  return a;
}
</code></pre></div><h3 id="泛型约束"><a href="#泛型约束" aria-hidden="true" class="header-anchor">#</a> 泛型约束</h3> <p>话不多少，先看代码</p> <div class="language- extra-class"><pre class="language-text"><code>static void Main(string[] args)
{
    Generic&lt;Fanxing&gt; g = newGeneric&lt;Fanxing&gt;();
    Fanxing fx = new Fanxing();
    fx.Name = &quot;Jack&quot;;
    g.Name = fx;
    Console.WriteLine(g.Name.Name);
    
    Generic&lt;Base&gt; gsBase = newGeneric&lt;Base&gt;();
    Base b = new Base();
    b.Name = &quot;Curry&quot;;
    gsBase.Name = b;
    Console.WriteLine(gsBase.Name.Name);
    
    Console.ReadKey();
}

public class Generic&lt;T&gt; where T :Base
{
    public T Name=default(T);
}
public class Base
{
    public string Name { get; set; }
}
public class Fanxing:Base
{
    public new string Name { get; set; }
}
</code></pre></div><p>泛型默认会有一个约束，当我们不显示的声明时，这个约束不存在。但当我们显示的声明的时候，这个约束就会执行。</p> <p>从代码中可以看出where T : Base就是这个特别的约束。这个约束限制了泛型的类型，要求我们Generic类的指定类型T必须是Base或者继承Base类的类型。</p> <table><thead><tr><th>约束</th> <th>说明</th></tr></thead> <tbody><tr><td>T：struct</td> <td>类型参数必须是值类型。可以指定除 Nullable 以外的任何值类型。</td></tr> <tr><td>T：class</td> <td>类型参数必须是引用类型，包括任何类、接口、委托或数组类型。</td></tr> <tr><td>T：new()</td> <td>类型参数必须具有无参数的公共构造函数。当与其他约束一起使用时，new() 约束必须最后指定。</td></tr> <tr><td>T：&lt;基类名&gt;</td> <td>类型参数必须是指定的基类或派生自指定的基类。</td></tr> <tr><td>T：&lt;接口名称&gt;</td> <td>类型参数必须是指定的接口或实现指定的接口。可以指定多个接口约束。约束接口也可以是泛型的。</td></tr> <tr><td>T：U</td> <td>为 T 提供的类型参数必须是为 U 提供的参数或派生自为 U 提供的参数。这称为裸类型约束。</td></tr></tbody></table> <h3 id="泛型函数"><a href="#泛型函数" aria-hidden="true" class="header-anchor">#</a> 泛型函数</h3> <p>泛型不仅能作用在类上，也可单独用在方法上，它可以根据方法参数的类型自动适应各种参数，这样的方法叫泛型方法。</p> <div class="language- extra-class"><pre class="language-text"><code>static void Main(string[] args)
{
    Person p = new Person();
    p.GetInfo&lt;int&gt;(11);
    p.GetInfo&lt;string&gt;(&quot;11&quot;);
    Console.ReadKey();
}

public class Person
{
    public void GetInfo&lt;T&gt;(T obj)
    {
        if (obj.GetType()== typeof(int))
        {
            Console.WriteLine(&quot;这是一个int类型:&quot;+ obj.GetType());
        }else if (obj.GetType() == typeof(string))
        {
            Console.WriteLine(&quot;这是一个string类型&quot;);
        }
    }
}
</code></pre></div><h3 id="泛型委托action和func"><a href="#泛型委托action和func" aria-hidden="true" class="header-anchor">#</a> 泛型委托Action和Func</h3> <ol><li>Action是无返回值的泛型委托,Action至少0个参数，至多16个参数，无返回值。</li></ol> <div class="language- extra-class"><pre class="language-text"><code>Action&lt;string, int&gt; action = (a, b) =&gt; Console.WriteLine(a+b); 
action(&quot;hello&quot;, 18);
</code></pre></div><ol start="2"><li>Func是有返回值的泛型委托，Func至少0个参数，至多16个参数，根据返回值泛型返回。必须有返回值，不可void</li></ol> <div class="language- extra-class"><pre class="language-text"><code>Func&lt;int, int, int&gt; add= (x, y) =&gt; x + y;
int result = add(1, 2);
</code></pre></div><p>参考：<a href="https://www.cnblogs.com/kiba/p/9321530.html" target="_blank" rel="noopener noreferrer">C#语法——泛型的多种应用<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/10.ec966a39.js" defer></script><script src="/assets/js/app.e7516a85.js" defer></script>
  </body>
</html>
